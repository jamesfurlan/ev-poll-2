(this["webpackJsonpev-poll"]=this["webpackJsonpev-poll"]||[]).push([[0],{63:function(e,t,a){e.exports=a(74)},68:function(e,t,a){},69:function(e,t,a){},74:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),o=a(8),s=a.n(o),i=(a(68),a(22)),c=a(13),r=a(30),h=a(31),u=a(9),d=a(32),m=(a(69),a(115)),p=a(114),v=a(111),b=a(113),f=a(105),E=a(51),O=a.n(E),g=a(52),k=a.n(g),C=a(48),j=a.n(C),y=a(47),P=a.n(y),w=a(117),S=a(112),D=a(110),N=a(118),R=a(50),T=a.n(R),I=a(53),M=a.n(I),B=a(49),F=a.n(B),L=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(r.a)(this,Object(h.a)(t).call(this,e))).state={open:!1},a.handleClose=a._handleClose.bind(Object(u.a)(a)),a.handleClickOpen=a._handleOpen.bind(Object(u.a)(a)),a.handleChange=a.handleChange.bind(Object(u.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(u.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"_handleClose",value:function(){this.setState({open:!1,value:this.props.Message})}},{key:"_handleOpen",value:function(){this.setState({open:!0,value:this.props.Message})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=new FormData;a.set("id",t.props.Id),a.set("content",t.state.value),fetch("http://localhost:"+window.BACKEND_PORT+"/edit",{method:"PUT",body:a}).then((function(){t.props.updatePolls(),t.setState({value:t.props.Message,open:!1})})).catch((function(e){console.log("Fetch error: "+e)}))}},{key:"handleChange",value:function(e){this.setState({value:e.target.value})}},{key:"render",value:function(){return l.a.createElement("div",{className:"buttonLine"},l.a.createElement(f.a,{variant:"contained",id:"editButton",startIcon:l.a.createElement(P.a,null),onClick:this.handleClickOpen},"edit"),l.a.createElement(w.a,{open:this.state.open,onClose:this.handleClose,"aria-labelledby":"form-dialog-title"},l.a.createElement(N.a,{id:"form-dialog-title",className:"editbox"},"Edit message"),l.a.createElement(D.a,null,l.a.createElement("form",{onSubmit:this.handleSubmit},l.a.createElement(m.a,{autoFocus:!0,margin:"dense",id:"name",label:"New message",type:"text",defaultValue:this.props.Message,onChange:this.handleChange,fullWidth:!0})),l.a.createElement(S.a,null,l.a.createElement(f.a,{onClick:this.handleClose,color:"primary"},"Cancel"),l.a.createElement(f.a,{onClick:this.handleSubmit,color:"primary"},"Submit")))))}}]),t}(l.a.Component),A=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(r.a)(this,Object(h.a)(t).call(this,e))).handleLike=a.handleLike.bind(Object(u.a)(a)),a.handleDismiss=a.handleDismiss.bind(Object(u.a)(a)),a.handleResolution=a.handleResolution.bind(Object(u.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"handleLike",value:function(){var e=this,t=new FormData;t.set("id",e.props.Id),fetch("http://localhost:"+window.BACKEND_PORT+"/like",{method:"POST",body:t}).then((function(){e.props.updatePolls()})).catch((function(e){console.log("Fetch error: "+e)}))}},{key:"handleDismiss",value:function(){var e=this,t=new FormData;t.set("id",e.props.Id),fetch("http://localhost:"+window.BACKEND_PORT+"/dismiss",{method:"DELETE",body:t}).then((function(){e.props.updatePolls()})).catch((function(e){console.log("Fetch error: "+e)}))}},{key:"handleResolution",value:function(){var e=this,t=new FormData;t.set("id",e.props.Id),fetch("http://localhost:"+window.BACKEND_PORT+"/resolve",{method:"POST",body:t}).then((function(){e.props.updatePolls()})).catch((function(e){console.log("Fetch error: "+e)}))}},{key:"render",value:function(){var e="pollQuestion ".concat(this.props.Resolved?"resolved":"");return l.a.createElement(b.a,{className:e},l.a.createElement("div",{className:"message"},this.props.Message),l.a.createElement("div",{className:"messagebuttons"},l.a.createElement(f.a,{variant:"contained",color:"primary",startIcon:l.a.createElement(j.a,null),onClick:this.handleLike,className:"buttonLine"},"like (",this.props.Likes,")"),l.a.createElement(L,{Id:this.props.Id,Message:this.props.Message,updatePolls:this.props.updatePolls}),l.a.createElement(f.a,{variant:"contained",startIcon:this.props.Resolved?l.a.createElement(F.a,null):l.a.createElement(T.a,null),onClick:this.handleResolution,className:"buttonLine",id:"resolveButton"},this.props.Resolved?"Resolved":"Resolve"),l.a.createElement(f.a,{variant:"contained",color:"secondary",startIcon:l.a.createElement(O.a,null),onClick:this.handleDismiss,className:"buttonLine"},"dismiss")))}}]),t}(l.a.Component),_=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(r.a)(this,Object(h.a)(t).call(this,e))).updatePolls=a.updatePolls.bind(Object(u.a)(a)),a.mapMessages=a.mapMessages.bind(Object(u.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"mapMessages",value:function(e){var t=this;return e.map((function(e){return l.a.createElement(A,{key:e.id.toString(),Id:e.id,Message:e.content,Likes:e.upvotes,updatePolls:t.updatePolls,Resolved:e.resolved})}))}},{key:"scrollToBottom",value:function(){this.messagesEnd.scrollIntoView({behavior:"smooth"})}},{key:"componentDidMount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this;fetch("http://localhost:"+window.BACKEND_PORT+"/get",{method:"GET"}).then((function(a){a.json().then((function(a){var n=t.mapMessages(a.posts);t.setState({data:n}),e&&t.scrollToBottom()})).catch((function(e){console.log("Map error:",e)}))})).catch((function(e){console.log("Fetch error: "+e)}))}},{key:"updatePolls",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.componentDidMount(e)}},{key:"render",value:function(){var e=this;return l.a.createElement(v.a,{className:"pollBox",id:"pollbox"},this.state&&this.state.data,l.a.createElement("div",{style:{float:"left",clear:"both"},ref:function(t){e.messagesEnd=t}}))}}]),t}(l.a.Component),K=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(r.a)(this,Object(h.a)(t).call(this,e))).state={value:""},a.handleChange=a.handleChange.bind(Object(u.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(u.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"handleChange",value:function(e){this.setState({value:e.target.value})}},{key:"handleSubmit",value:function(e){var t=this;if(e.preventDefault(),""!==t.state.value){var a=new FormData;a.set("content",t.state.value),fetch("http://localhost:"+window.BACKEND_PORT+"/post",{method:"POST",body:a}).then((function(){t.props.updatePolls(1)})).catch((function(e){console.log("Fetch error: "+e)})),t.setState({value:""})}}},{key:"render",value:function(){return l.a.createElement(p.a,null,l.a.createElement("form",{onSubmit:this.handleSubmit},l.a.createElement(m.a,{id:"filled-helperText",label:"Question",variant:"filled",value:this.state.value,onChange:this.handleChange}),l.a.createElement(f.a,{variant:"contained",color:"primary",startIcon:l.a.createElement(k.a,null),onClick:this.handleSubmit},"POST")))}}]),t}(l.a.Component),x=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(r.a)(this,Object(h.a)(t).call(this,e))).updatePolls=a.updatePolls.bind(Object(u.a)(a)),a.child=l.a.createRef(),a.handleClearAll=a.handleClearAll.bind(Object(u.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"updatePolls",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.child.current.updatePolls(e)}},{key:"handleClearAll",value:function(){var e=this;fetch("http://localhost:"+window.BACKEND_PORT+"/clear",{method:"DELETE"}).then((function(){e.updatePolls()})).catch((function(e){console.log("Fetch error: "+e)}))}},{key:"render",value:function(){return l.a.createElement(p.a,null,l.a.createElement("div",{className:"header"},l.a.createElement("div",{className:"logo"},"PollEV Mark II"),l.a.createElement(f.a,{startIcon:l.a.createElement(M.a,null),color:"secondary",className:"clearButton",onClick:this.handleClearAll},"clear all")),l.a.createElement(_,{Data:[],ref:this.child}),l.a.createElement("div",{className:"separator"}),l.a.createElement(K,{updatePolls:this.updatePolls}))}}]),t}(l.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(l.a.createElement(x,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[63,1,2]]]);
//# sourceMappingURL=main.ebc6de99.chunk.js.map